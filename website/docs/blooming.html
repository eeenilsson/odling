<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Körsbärskollen - Blomning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Körsbärskollen</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Hem</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./choosing_variety.html" rel="" target="">
 <span class="menu-text">Sorter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./tables_comparison.html" rel="" target="">
 <span class="menu-text">Jämförelse</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./pollination_about.html" rel="" target="">
 <span class="menu-text">Pollination</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./blooming.html" rel="" target="" aria-current="page">
 <span class="menu-text">Blomning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./pollination_table.html" rel="" target="">
 <span class="menu-text">Pollinationsschema</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cultivation.html" rel="" target="">
 <span class="menu-text">Odling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./recepies.html" rel="" target="">
 <span class="menu-text">Recept</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./terminology.html" rel="" target="">
 <span class="menu-text">Ordbok</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resources.html" rel="" target="">
 <span class="menu-text">Resurser</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#blomningstid" id="toc-blomningstid" class="nav-link active" data-scroll-target="#blomningstid">Blomningstid</a>
  <ul class="collapse">
  <li><a href="#risk-för-frost" id="toc-risk-för-frost" class="nav-link" data-scroll-target="#risk-för-frost">Risk för frost</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Blomning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="blomningstid" class="level1 page-columns page-full">
<h1>Blomningstid</h1>
<p>För att en sort skall kunna pollinera en annan behöver de blomma samtidigt (givaren måste frisätta pollen under den period då mottagarens ägg är mottagligt). De bästa förutsättningarna för befruktning inom 2 dagar efter blomning. Efter 7 dagar är det ca 30% viabilitet i de flesta sorter och detta är temperaturberoende på så vis att svalare temperatur ger längre viabilitet.</p>
<p>I Sverige blommar körsbären i slutet av april till början av maj. Tittar man på forskningsdata från Ullensvang i Norge startade blomningen där för sötkörsbär vanligen 6-14 maj (intervall 20 april till 22 maj beroende på år och sort). Blomningens varaktighet för ett körsbärsträd var där vanligen 9-16 dagar (intervall 7 till 19 dagar). Tar man med data från andra länder och justerar för odlingsplats och år ser man att för 80% av sorterna ligger start av blomningstiden inom ett spann på ca 9 dagar från varandra och blomningen varar 6-9 dagar. Låga temperaturer kan fördröja start av blomning, särskilt hos senblommande sorter. Faktorer som ålder, grundstam, närings- och vattentillgång, temperatur mm kan påverka varaktigheten av blomningen och det är tänkbart att olilka sorter påverkas olika av detta.</p>
<!-- Referens: Wenden 2016, "A collection of European sweet cherry phenology data for assessing climate change". -->
<!-- Ref: Wenden, B., Campoy, J., Lecourt, J. et al. A collection of European sweet cherry phenology data for assessing climate change. Sci Data 3, 160108 (2016). https://doi.org/10.1038/sdata.2016.108 -->
<!-- ## Tunisia: file:///home/e/Downloads/Chapitre_YoussefA_21_FloweringofSweetCherries.pdf -->
<!-- ## "The four cultuvars “Napoleon,” “Van,” “Moreau,” and “Sunburst” behave differently in the two sites which can exclude the genetic potential factor in the triggering and the duration of flowering assuming that this phenomenon depends on the physiological state, age, rootstock, expression of cultivar genes, and other external factors (photoperiod, soil, nutrient supply, rainfall, and temperature)." -->
<p>I <a href="#fig-btstartros">Figure&nbsp;1</a> visas skillnad i start av blomning för olika sorter (data från <img src="https://www.rosbreed.org/.png" class="img-fluid" alt="RosBREED">). Värdet på tidsaxeln är antal dagar från den tidigaste sorten. Perioder på ca 3 dagars intervall är markerade.</p>
<div class="column-screen">
<div id="fig-btstartros" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../../../dropbox/images/plants/bt_start_ros.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Start av blomning</figcaption>
</figure>
</div>
</div>
<!-- Tidig -->
<!-- Medeltidig -->
<!-- Medel -->
<!-- Medelsen -->
<!-- Sen -->
<!-- "RHS pollination group numbers, which divide apple, pear, plum, and cherry cultivars into 7 flowering periods. Pollination group 1 is the earliest to flower. pollinates same group +-1 group" -->
<!-- Morello flowers over long period. -->
<!-- Apple bloom groups -->
<!-- Here are the bloom groups: -->
<!-- Group 1: early -->
<!-- Group 2: early-mid -->
<!-- Group 3: mid -->
<!-- Group 4: mid-late -->
<!-- Group 5: late -->
<!-- Mognadstid -->
<!-- Körsbärsvecka 1 börjar olika datum olika år och bestäms av ... -->
<!-- En "Körsbärsvecka" är 15 dagar.  -->
<!-- Skördetid?? -->
<!-- Enligt SLU (2021) har blommande växter 6 olika fenologiska stadier. Dessa representeras av blomning, lövsprickning, fruktmognad, fröspridning, höstfärg och lövfällning -->
<!-- [SLU fenologobservationer](https://www.slu.se/centrumbildningar-och-projekt/svenska-fenologinatverket/manualer/) -->
<!-- en inhemsk svensk art som sötkörsbär (Prunus avium) kan ha svårt att klara de svenska förhållandena om de har annan härkomst och exempelvis har odlats upp vid varmare breddgrader (ibid.) -->
<!-- lowering phenology (fenologi och blomning) -->
<!-- he average blossoming period for cherries when pollination can take place is about seven to eight days. -->
<!-- Pesticides, and in particular insecticides, can be harmful to pollinators. Most pesticide labels advise against their use during crop bloom for this reason. If an insecticide must be used during bloom, be sure to follow label directions and apply the pesticide when bees are least active, and so that the pesticide will dry before bees come into contact with flowers that have been exposed to it. For example, an application made at dusk or during the night will do the least harm to pollinators who visit flowers during the day. After the crop has finished blooming, be aware that pesticide drift onto non-crop flowering plants in adjacent habitat can harm pollinators on those flowers. -->
<!-- Fruit trees like sweet cherry require a period of chilling temperatures followed by a period of warm temperatures to induce blooming -->
<!-- The two trees should be within 100 -->
<!-- feet of each other and overlap in bloom tim -->
<!-- Paltineanu och Chitu (2020) som har gjort en undersökning om -->
<!-- hur klimatförändringar påverkar de fenologiska stadierna för surkörsbär (Prunus -->
<!-- cerasus) och sötkörsbär (Prunus avium) i ett tempererat klimat.  -->
<!-- Paltineanu, C. & Chitu, E. (2020). Climate change impact on phenological stages of -->
<!-- sweet and sour cherry trees in a continental climate environment. Scientia -->
<!-- Horticulturae, 261, 109011. https://doi.org/10.1016/j.scienta.2019.109011 -->
<!-- statistik som visar datum för sista frost med 50, 70 respektive 90 % sannolikhet.  Se Odlingskalendern på vackertvader.se -->
<section id="risk-för-frost" class="level2">
<h2 class="anchored" data-anchor-id="risk-för-frost">Risk för frost</h2>
<p>Om blomningen infaller före den sista frosten finns en risk att blommorna förstörs av den. Genomsnittligt datum för sista frost är mellan mitten av april och mitten av juni beroende på var i landet [tex i Örebro normalt 1 apr till 15 maj, största intervall 1 apr till 1 jun]. Karta från <a href="https://www.smhi.se">SMHI</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../dropbox/images/plants/sista_frost_2017_smhi.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Sista frost</figcaption>
</figure>
</div>
<!-- [SMHI Klimat](https://www.smhi.se/klimat/klimatet-da-och-nu/klimatindex/varens-sista-frost-1.77151) -->
<!-- [SMHI Öppna data](https://www.smhi.se/data) -->
<!-- - Temp, nederbörd mm -->
<!-- ZOnkarta norden, se : https://stud.epsilon.slu.se/12707/1/larsson_a_171020.pdf -->
<!-- karlberg-e-hiltunen-nilsen-a-20230502.pdf forskningsöversikt mm-->
<!-- https://stud.epsilon.slu.se/18809/1/karlberg-e-hiltunen-nilsen-a-20230502.pdf -->
<!-- ## Scientific papers -->
<!-- ORIGINAL RESEARCH article -->
<!-- Front. Plant Sci., 09 January 2020 -->
<!-- Sec. Plant Breeding -->
<!-- Volume 10 - 2019 | https://doi.org/10.3389/fpls.2019.01647 -->
<!-- Genetic Dissection of Bloom Time in Low Chilling Sweet Cherry (Prunus avium L.) Using a Multi-Family QTL Approach -->
<!-- "https://www.frontiersin.org/articles/10.3389/fpls.2019.01647/full -->

<!-- "Bloom time in sweet cherry (Prunus avium L.) is a highly heritable trait that varies between genotypes and depends on the environmental conditions. Bud-break occurs after chill and heat requirements of each genotype are fulfilled, and dormancy is released." -->
<!-- "Early blooming cultivars are susceptible to spring frost damage in cold regions (Luedeling, 2012), while late blooming cultivars can exhibit irregular floral development and low fruit set due to warm temperatures during the flowering period (Mahmood et al., 2000; Atkinson et al., 2013). The biological control of BT is complex and is known to depend on environmental signals during the winter and spring seasons (Abbott et al., 2015; Fadón and Rodrigo, 2018). Fruit trees like sweet cherry require a period of chilling temperatures followed by a period of warm temperatures to induce blooming (Lang et al., 1987). In Prunus species, several studies indicate that BT is more dependent on chilling than on heat requirement and that there is large variation in these requirements among individuals of the same species (Campoy et al., 2011; Okie and Blackburn, 2011; Sánchez-Pérez et al., 2012; Castède et al., 2014)." -->
<!-- "BT was evaluated for each progeny and the parental cultivars during 4 years (2015 to 2018). During the flowering season, blooming stage was evaluated 3 days per week (every 2–3 days) and BT was recorded when approximately 75% of the floral buds reached stage F (full bloom; Baggiolini, 1980). BT data were expressed as Julian Days (JD; days from January 1st). " -->
<!-- The datasets generated for this study can be found in the Genome database for Rosaceae, https://www.rosaceae.org/accession https://www.rosaceae.org/accession number tfGDR1040. -->
<!-- Bästa förutsättningarna för befruktning inom 2 dagar efter blomning, efter 7 dagar ca 30% viabilitet i de flesta sorter, temperaturberoende. -->
<!-- " Maximum pollen hydration and pollen germination occurred on the stigmas within 2 days of bloom, depending on cultivar and air temperature. Pollen hydration and germination, and ovule senescence accelerated under warmer temperatures. At 7 days post-anthesis and under 24 °C approximately 80% of ‘Rainier’ ovules were viable compared to 30% in the three other cultivars. Under moderate temperature (18 °C) which mimicked the field average flowering temperature, ovule of the two high productivity cherry cultivars, ‘Rainier’ and ‘Sweetheart’, kept full viabilities for 3–4 days post-anthesis while only 1 day for the two low productivity cultivars ‘Benton’ and ‘Tieton’.  -->
<!-- These results reveal that low commercial productivity of sweet cherry cultivars in the Pacific Northwest (PNW) of U.S. is likely due to rapid ovule senescence, a condition exacerbated in warm conditions https://www.sciencedirect.com/science/article/abs/pii/S030442381830431X" -->
<!-- Norway: -->
<!-- Modeling of sweet cherry flowering based on temperature and phenology in a mesic Nordic climate -->
<!-- Authors:       M. Meland, O. Frøynes, L. Coop, C. Kaiser -->
<!-- Keywords:      cherry (Prunus avium L), anthesis, chill units, flowering, dormancy, heat units -->
<!-- DOI:       10.17660/ActaHortic.2017.1162.4 -->
<!-- "Phenological observations are considered to be sensitive tools for identifying plant responses to climatic changes. Over the last 10 years, the onset of the phenophases of sweet cherry (Prunus avium L.) during spring tended to be earlier than the previous two decades in Ullensvang, western Norway. The effects of air temperature during the winter and spring months were evaluated during two quinquennia (5-year periods), 1996-2000 (Q1) and 2003-2007 (Q2) selected due to similar mean winter and early summer temperatures, but markedly different spring temperatures. Average January-February temperatures were similar (3.3°C) in both of these two 5-year periods. However, average March and April temperatures were slightly warmer (4.0 vs. 3.2°C) and (7.3 vs. 6.9°C), respectively, in Q2 vs. Q1. These increases resulted in significantly earlier flower development. Average temperatures during the first half of May were similar for both quinquennia (10.2 vs. 10.1°C). The start of flowering (first bloom) of early maturing 'Burlat' and mid-season 'Van' were significantly different. Timing of flowering phenophases were statistically different between Q1 and Q2 for both cultivars. Mean data for 'Burlat' and 'Van' first bloom were 8 days earlier during Q2, May 2 for 'Burlat' and May 1 for 'Van'. Full bloom occurred 3 days after first bloom and flowering ended 14 days after first bloom. First bloom during Q2 required 221 Baskerville-Emin Growing degree days (GDD) using a base temperature of 2°C. For the same time period in Q1, only 197 GDD were accumulated, which supports the observed temperature differences. Furthermore, we propose a flowering model for full bloom of both 'Burlat' and 'Van' in Ullensvang, which requires 254 Baskerville-Emin GDD using a base of 2°C starting on March 1." -->
<!-- Radičević Sweet cherries classified according to the time of flowering -->

<!-- TABLE with groups. GENETIKA, Vol. 43, No. 2, 397-406, 2011 -->
<!-- "To investigate the flowering phenopase, we studied flowering time, -->
<!-- progress and abundance of flowering by monitoring and taking notes on flowering -->
<!-- onset (a date when 10 to 20% of flowers are open), full flowering (90–100% flowers -->
<!-- are open) and end of flowering (90% of petals fallen off) and abundance of flowering -->
<!-- (graded as follows: excellent (5), very good (4), good (3), poor (2), bad (1) and -->
<!-- without flowers (0)). Given flowering phenogram involves average data obtained -->
<!-- over the eight-year period (1999−2006). The studied sweet cherry cultivars are -->
<!-- classified into four groups in terms of flowering time: early, mid-early, mid-late and -->
<!-- late." -->
<!-- "Reporting on the results of study of flowering -->
<!-- time in 80 sweet cherry cultivars, HODUN and HODUN (2002) stated that the earliest and the latest flowering cultivars covered the span of three to nine days. " -->
<!-- "In the studied sweet cherry cultivars, full flowering followed two to four -->
<!-- days after flowering onset. In the majority of cultivars (the total of 13), full flowering began averagely three days after flowering onset." -->
<!-- "In the studied sweet cherry cultivars flowering period took up between 9 (‘Bing’, ‘Lambert’) and 13 days (‘Lyons Early’, ‘Souvenir’, ‘Burlat’, ‘Sunburst’).  Sweet cherry belongs in the group of stone fruits that exhibit short period from the flowering onset to full flowering date (up to 3 days). MOGHADAM et al. (2009) reported that flowering period of 25 sweet cherry cultivars took approximately 11-18 days; keeping in view to weather conditions, the flowering time may change.  Fruit set in sweet cherries is largely governed by abundance of flowering.   -->
<!-- Five sweet cherry cultivars demonstrated excellent abundance of flowering, i.e.  ‘Lyons Early’, ‘Souvenir’, ‘Emperor Francis’, ‘Lapins’ and ‘Sunburst’; it was lowest (grade 3) in ‘Lambert’." -->
<!-- "The majority of the studied cultivars (the total of 9 cultivars, i.e. 42.86%) belong to the group of mid-late flowering cultivars. Our results concerning the sequence of flowering of some cultivars are mainly in agreement with those reported by HODUN and HODUN (2002), with the exception of ‘Kordia’. However, ‘Kordia’ was classified as a late flowering cultivar, but according to our results it belongs to the group of mid-late flowering cultivars" -->
<!-- SEE Graphic 1. Phenophase of flowering in studied sweet cherry cultivars (1999–2006) -->

<!-- Table 3. Flowering time and (in)compatibility in the studied sweet cherry cultivars "Heatmap" wit some boxes marked "Flowering time overlap", "Insufficient overlap in some seasons", and "insufficient overlap" Symboler i vissa ruto3 "Compatible" och se,i-compatible -->
<!-- Self-compatibility of cultivars ‘Compact Stella’ (S3S4'), ‘Lapins’ (S1S4'), and ‘Sunburst’ (S3S4') is attributed to a mutant S4 allele, denoted S4', where the prime symbol indicates the loss of pollen-S function -->
<!-- Genetikavol43no2_rad18.pdf GENETIKA, Vol. 43, No. 2, 397-406, 2011 -->

<!-- "Similarly, we find it necessary to suggest exceptional potential of combining mid-late flowering cultivars whose flowering period overlaps with that of the majority of other cultivars. Some earlier investigations point to high in vitro pollen germination in some of these cultivars − ‘Van’, ‘Compact Stella’ (CEROVIĆ et al., 2003), and in self-compatible ‘Sunburst’ and ‘Lapins’ (RADIČEVIĆ et al., 2008).  On the other hand, cultivars classified as those with extreme flowering period cannot be recommended as suitable pollenisers among these groups, even when their classification according to incompatibility groups allows cross-pollination and fertilization.  Cultivar combinations categorized as ‘insufficient overlap in some seasons’ can be suitable in some seasons and localities, provided that S-genotype requirements are satisfied, though the risk of insufficient overlap in full flowering remains. This can particularly be emphasized when relatively low temperatures occurring over the period of flowering onset in sweet cherry markedly postpone flowering onset in late flowering cultivars." -->
<!-- Early, Mid-Early, Mid-Late, Late -->
<!-- ORIGINAL RESEARCH article -->
<!-- Front. Plant Sci., 09 January 2020 -->
<!-- Sec. Plant Breeding -->
<!-- Volume 10 - 2019 | https://doi.org/10.3389/fpls.2019.01647 -->
<!-- Genetic Dissection of Bloom Time in Low Chilling Sweet Cherry (Prunus avium L.) Using a Multi-Family QTL Approach -->
<!-- https://www.frontiersin.org/articles/10.3389/fpls.2019.01647/full -->
<!-- "Fruit trees like sweet cherry require a period of chilling temperatures followed by a period of warm temperatures to induce blooming (Lang et al., 1987). In Prunus species, several studies indicate that BT is more dependent on chilling than on heat requirement and that there is large variation in these requirements among individuals of the same species (Campoy et al., 2011; Okie and Blackburn, 2011; Sánchez-Pérez et al., 2012; Castède et al., 2014)." -->
<!-- "everal genetic studies in Prunus have focused on understanding the genetic control of chilling (CR) and heat requirements (HR) contributing to the differences in BT (reviewed in Abbott et al., 2015). BT in Prunus is a quantitative trait with high heritability (Anderson and Seeley, 1993; Dirlewanger et al., 2012; Castède et al., 2014)," -->
<!-- "The biological control of BT is complex and is known to depend on environmental signals during the winter and spring seasons (Abbott et al., 2015; Fadón and Rodrigo, 2018). " -->


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>